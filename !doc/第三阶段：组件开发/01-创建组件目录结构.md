# 创建组件目录结构

## 1.1 为什么需要组件目录结构？

良好的组件目录结构可以：

- ✅ 提高代码可维护性
- ✅ 便于团队协作
- ✅ 快速定位组件位置
- ✅ 遵循最佳实践

---

## 1.2 推荐的组件目录结构

### 基本结构

```
app/
├── components/          # 共享组件目录
│   ├── ui/             # 基础 UI 组件
│   │   ├── Button.tsx
│   │   ├── Card.tsx
│   │   └── Input.tsx
│   ├── layout/         # 布局组件
│   │   ├── Header.tsx
│   │   ├── Footer.tsx
│   │   └── Sidebar.tsx
│   └── features/       # 功能组件（可选）
│       ├── TodoList.tsx
│       └── UserProfile.tsx
├── about/
│   └── components/     # 局部组件（仅用于 about 页面）
│       └── AboutHero.tsx
└── contact/
    └── components/     # 局部组件（仅用于 contact 页面）
        └── ContactForm.tsx
```

### 目录说明

1. **`app/components/`**：存放共享组件，可在多个页面使用
2. **`app/components/ui/`**：存放基础 UI 组件（Button、Card、Input 等）
3. **`app/components/layout/`**：存放布局相关组件
4. **`app/[route]/components/`**：存放特定路由的局部组件

---

## 1.3 创建组件目录

### 步骤 1：创建基础目录

```bash
# 在项目根目录下执行
mkdir -p app/components/ui
mkdir -p app/components/layout
```

### 步骤 2：创建基础组件

现在让我们创建三个基础组件：`Button.tsx`、`Card.tsx`、`Input.tsx`。

---

## 1.4 创建基础组件

### 组件 1：Button.tsx

**位置：** `app/components/ui/Button.tsx`

```typescript
// app/components/ui/Button.tsx
import React from 'react'

interface ButtonProps {
  children: React.ReactNode
  onClick?: () => void
  type?: 'button' | 'submit' | 'reset'
  variant?: 'primary' | 'secondary' | 'danger'
  disabled?: boolean
  className?: string
}

export default function Button({
  children,
  onClick,
  type = 'button',
  variant = 'primary',
  disabled = false,
  className = '',
}: ButtonProps) {
  const baseStyles = 'px-4 py-2 rounded font-medium transition-colors'
  
  const variantStyles = {
    primary: 'bg-blue-500 text-white hover:bg-blue-600',
    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300',
    danger: 'bg-red-500 text-white hover:bg-red-600',
  }
  
  const disabledStyles = disabled
    ? 'opacity-50 cursor-not-allowed'
    : 'cursor-pointer'
  
  return (
    <button
      type={type}
      onClick={onClick}
      disabled={disabled}
      className={`${baseStyles} ${variantStyles[variant]} ${disabledStyles} ${className}`}
    >
      {children}
    </button>
  )
}
```

**使用示例：**

```typescript
import Button from '@/app/components/ui/Button'

export default function Page() {
  return (
    <div>
      <Button variant="primary">主要按钮</Button>
      <Button variant="secondary">次要按钮</Button>
      <Button variant="danger">危险按钮</Button>
    </div>
  )
}
```

---

### 组件 2：Card.tsx

**位置：** `app/components/ui/Card.tsx`

```typescript
// app/components/ui/Card.tsx
import React from 'react'

interface CardProps {
  children: React.ReactNode
  title?: string
  className?: string
}

export default function Card({ children, title, className = '' }: CardProps) {
  return (
    <div className={`bg-white rounded-lg shadow-md p-6 ${className}`}>
      {title && (
        <h2 className="text-xl font-bold mb-4 text-gray-800">{title}</h2>
      )}
      <div>{children}</div>
    </div>
  )
}
```

**使用示例：**

```typescript
import Card from '@/app/components/ui/Card'

export default function Page() {
  return (
    <Card title="卡片标题">
      <p>这是卡片的内容</p>
    </Card>
  )
}
```

---

### 组件 3：Input.tsx

**位置：** `app/components/ui/Input.tsx`

```typescript
// app/components/ui/Input.tsx
import React from 'react'

interface InputProps {
  type?: string
  placeholder?: string
  value?: string
  onChange?: (e: React.ChangeEvent<HTMLInputElement>) => void
  label?: string
  required?: boolean
  className?: string
}

export default function Input({
  type = 'text',
  placeholder,
  value,
  onChange,
  label,
  required = false,
  className = '',
}: InputProps) {
  return (
    <div className="mb-4">
      {label && (
        <label className="block text-sm font-medium text-gray-700 mb-1">
          {label}
          {required && <span className="text-red-500 ml-1">*</span>}
        </label>
      )}
      <input
        type={type}
        placeholder={placeholder}
        value={value}
        onChange={onChange}
        required={required}
        className={`w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${className}`}
      />
    </div>
  )
}
```

**使用示例：**

```typescript
'use client'

import { useState } from 'react'
import Input from '@/app/components/ui/Input'

export default function Page() {
  const [name, setName] = useState('')
  
  return (
    <Input
      label="姓名"
      placeholder="请输入您的姓名"
      value={name}
      onChange={(e) => setName(e.target.value)}
      required
    />
  )
}
```

---

## 1.5 组件组织最佳实践

### 1.5.1 何时使用共享组件 vs 局部组件？

**使用共享组件（`app/components/`）：**
- ✅ 在多个页面或路由中使用的组件
- ✅ 基础 UI 组件（Button、Card、Input 等）
- ✅ 布局组件（Header、Footer 等）

**使用局部组件（`app/[route]/components/`）：**
- ✅ 只在特定路由中使用的组件
- ✅ 页面特定的业务逻辑组件
- ✅ 不需要在其他地方复用的组件

### 1.5.2 组件命名规范

- ✅ 使用 PascalCase 命名组件文件：`Button.tsx`、`UserCard.tsx`
- ✅ 组件名称与文件名保持一致
- ✅ 使用描述性的名称，避免缩写

### 1.5.3 组件导出方式

**方式 1：默认导出（推荐用于单个组件）**

```typescript
// Button.tsx
export default function Button() {
  return <button>按钮</button>
}

// 使用
import Button from '@/app/components/ui/Button'
```

**方式 2：命名导出（推荐用于多个相关组件）**

```typescript
// buttons.tsx
export function PrimaryButton() { ... }
export function SecondaryButton() { ... }

// 使用
import { PrimaryButton, SecondaryButton } from '@/app/components/ui/buttons'
```

---

## 1.6 实际应用示例

### 示例：创建一个使用基础组件的页面

**创建页面：** `app/components-demo/page.tsx`

```typescript
// app/components-demo/page.tsx
'use client'

import { useState } from 'react'
import Button from '@/app/components/ui/Button'
import Card from '@/app/components/ui/Card'
import Input from '@/app/components/ui/Input'

export default function ComponentsDemoPage() {
  const [name, setName] = useState('')
  const [email, setEmail] = useState('')
  
  const handleSubmit = () => {
    alert(`提交：${name} - ${email}`)
  }
  
  return (
    <div className="container mx-auto p-8">
      <h1 className="text-3xl font-bold mb-8">组件演示</h1>
      
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        {/* Card 组件演示 */}
        <Card title="表单示例">
          <Input
            label="姓名"
            placeholder="请输入姓名"
            value={name}
            onChange={(e) => setName(e.target.value)}
          />
          <Input
            label="邮箱"
            type="email"
            placeholder="请输入邮箱"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
          />
          <div className="mt-4 flex gap-2">
            <Button variant="primary" onClick={handleSubmit}>
              提交
            </Button>
            <Button variant="secondary" onClick={() => {
              setName('')
              setEmail('')
            }}>
              重置
            </Button>
          </div>
        </Card>
        
        {/* Button 组件演示 */}
        <Card title="按钮示例">
          <div className="space-y-4">
            <div>
              <Button variant="primary">主要按钮</Button>
            </div>
            <div>
              <Button variant="secondary">次要按钮</Button>
            </div>
            <div>
              <Button variant="danger">危险按钮</Button>
            </div>
            <div>
              <Button variant="primary" disabled>
                禁用按钮
              </Button>
            </div>
          </div>
        </Card>
      </div>
    </div>
  )
}
```

**访问 URL：** `http://localhost:3000/components-demo`

---

## 1.7 常见问题解答

### Q1：组件应该放在哪里？

**A：** 
- 共享组件 → `app/components/`
- 局部组件 → `app/[route]/components/`

### Q2：如何组织大量组件？

**A：** 
- 按功能分类：`ui/`、`layout/`、`features/`
- 按类型分类：`buttons/`、`forms/`、`cards/`
- 保持目录层级不超过 3 层

### Q3：可以使用 `src/components/` 吗？

**A：** 可以，但 Next.js App Router 推荐使用 `app/components/`，因为：
- 更符合 App Router 的约定
- 路径别名 `@/` 默认指向项目根目录
- 与路由结构保持一致

---

## 1.8 总结

### 关键要点

1. **目录结构**：`app/components/` 存放共享组件，`app/[route]/components/` 存放局部组件
2. **基础组件**：创建可复用的 UI 组件（Button、Card、Input）
3. **命名规范**：使用 PascalCase，组件名与文件名一致
4. **组织方式**：按功能或类型分类组织组件

### 下一步

完成组件目录结构创建后，可以开始学习服务端组件和客户端组件的实践。

---

**学习进度：** ✅ 组件目录结构创建完成

