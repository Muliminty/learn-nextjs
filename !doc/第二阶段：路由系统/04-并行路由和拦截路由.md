# 并行路由和拦截路由

## 4.1 并行路由（Parallel Routes）

### 4.1.1 什么是并行路由？

并行路由允许同时渲染多个路由，使用 `@folder` 语法创建。

**关键特点：**
- 使用 `@folder` 语法创建
- 可以同时渲染多个路由段
- 用于创建复杂的布局模式

### 4.1.2 基本语法

```text
app/
├── @analytics/
│   └── page.tsx
├── @team/
│   └── page.tsx
└── dashboard/
    └── page.tsx
```

### 4.1.3 实际示例

**目录结构：**

```text
app/
├── @analytics/
│   └── page.tsx
├── @team/
│   └── page.tsx
└── dashboard/
    └── layout.tsx
    └── page.tsx
```

**布局文件：**

```typescript
// app/dashboard/layout.tsx
export default function DashboardLayout({
  children,
  analytics,
  team,
}: {
  children: React.ReactNode
  analytics: React.ReactNode
  team: React.ReactNode
}) {
  return (
    <div>
      <main>{children}</main>
      <aside>{analytics}</aside>
      <aside>{team}</aside>
    </div>
  )
}
```

---

## 4.2 拦截路由（Intercepting Routes）

### 4.2.1 什么是拦截路由？

拦截路由允许拦截并修改路由行为，使用 `(.)` 和 `(..)` 语法。

**关键特点：**
- 使用 `(.)` 拦截同一层级的路由
- 使用 `(..)` 拦截上一层级的路由
- 用于创建模态框、侧边栏等 UI 模式

### 4.2.2 语法说明

| 语法 | 说明 | 示例 |
|------|------|------|
| `(.)` | 拦截同一层级的路由 | `app/@modal/(.)photo/[id]/page.tsx` |
| `(..)` | 拦截上一层级的路由 | `app/@modal/(..)photo/[id]/page.tsx` |
| `(..)(..)` | 拦截上两级的路由 | `app/@modal/(..)(..)photo/[id]/page.tsx` |
| `(...)` | 拦截根路由 | `app/@modal/(...)photo/[id]/page.tsx` |

### 4.2.3 实际示例

**创建照片模态框：**

```text
app/
├── @modal/
│   └── (.)photo/
│       └── [id]/
│           └── page.tsx    # 拦截 /photo/[id]
├── photo/
│   └── [id]/
│       └── page.tsx        # 正常路由 /photo/[id]
└── layout.tsx
```

**模态框页面：**

```typescript
// app/@modal/(.)photo/[id]/page.tsx
import { Modal } from '@/app/components/Modal'

export default function PhotoModal({
  params,
}: {
  params: { id: string }
}) {
  return (
    <Modal>
      <h1>照片 {params.id}</h1>
    </Modal>
  )
}
```

**正常照片页面：**

```typescript
// app/photo/[id]/page.tsx
export default function PhotoPage({
  params,
}: {
  params: { id: string }
}) {
  return (
    <div>
      <h1>照片 {params.id}</h1>
    </div>
  )
}
```

---

## 4.3 总结

### 关键要点

1. **并行路由**：使用 `@folder` 语法，同时渲染多个路由
2. **拦截路由**：使用 `(.)` 和 `(..)` 语法，拦截并修改路由行为
3. **高级特性**：这些是 Next.js App Router 的高级路由特性
4. **使用场景**：复杂的布局模式和 UI 交互

### 学习建议

- 先掌握静态路由和动态路由
- 理解路由组的概念
- 再学习并行路由和拦截路由
- 这些特性在实际项目中不常用，但了解它们有助于理解 Next.js 的路由系统

---

**注意**：并行路由和拦截路由是高级特性，在实际项目中不常用。建议先掌握基础路由功能，再学习这些高级特性。

