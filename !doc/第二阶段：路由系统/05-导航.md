# 导航

## 5.1 什么是导航？

在 Next.js 中，导航是指在不同页面之间进行跳转。Next.js 提供了两种导航方式：

1. **客户端导航**：使用 `next/link` 组件
2. **编程式导航**：使用 `useRouter` Hook

---

## 5.2 客户端导航：使用 `next/link`

### 5.2.1 基本用法

`next/link` 是 Next.js 提供的导航组件，用于创建客户端导航链接。

**基本语法：**

```typescript
import Link from 'next/link'

<Link href="/about">关于</Link>
```

### 5.2.2 实际示例

**示例 1：基础链接**

```typescript
// app/components/Navigation.tsx
'use client'  // Link 组件需要在客户端使用

import Link from 'next/link'

export default function Navigation() {
  return (
    <nav>
      <Link href="/">首页</Link>
      <Link href="/about">关于</Link>
      <Link href="/contact">联系</Link>
    </nav>
  )
}
```

**示例 2：带样式的链接**

```typescript
import Link from 'next/link'

export default function Navigation() {
  return (
    <nav className="flex gap-4">
      <Link href="/" className="text-blue-500 hover:text-blue-700">
        首页
      </Link>
      <Link href="/about" className="text-blue-500 hover:text-blue-700">
        关于
      </Link>
      <Link href="/contact" className="text-blue-500 hover:text-blue-700">
        联系
      </Link>
    </nav>
  )
}
```

**示例 3：动态路由链接**

```typescript
import Link from 'next/link'

export default function BlogList({ posts }) {
  return (
    <div>
      {posts.map(post => (
        <article key={post.id}>
          <h2>{post.title}</h2>
          {/* 动态生成链接 */}
          <Link href={`/blog/${post.id}`}>
            阅读全文
          </Link>
        </article>
      ))}
    </div>
  )
}
```

---

## 5.3 编程式导航：使用 `useRouter`

### 5.3.1 基本用法

`useRouter` 是 Next.js 提供的 Hook，用于在客户端进行编程式导航。

**重要**：`useRouter` 只能在客户端组件中使用。

### 5.3.2 实际示例

**示例 1：基础导航**

```typescript
// app/components/Button.tsx
'use client'

import { useRouter } from 'next/navigation'

export default function Button() {
  const router = useRouter()
  
  const handleClick = () => {
    // 导航到 /about 页面
    router.push('/about')
  }
  
  return (
    <button onClick={handleClick}>
      前往关于页面
    </button>
  )
}
```

**示例 2：带参数的导航**

```typescript
'use client'

import { useRouter } from 'next/navigation'

export default function PostButton({ postId }: { postId: number }) {
  const router = useRouter()
  
  const handleClick = () => {
    // 导航到动态路由
    router.push(`/blog/${postId}`)
  }
  
  return (
    <button onClick={handleClick}>
      查看文章
    </button>
  )
}
```

**示例 3：其他导航方法**

```typescript
'use client'

import { useRouter } from 'next/navigation'

export default function NavigationButtons() {
  const router = useRouter()
  
  const handleBack = () => {
    router.back()  // 返回上一页
  }
  
  const handleForward = () => {
    router.forward()  // 前进一页
  }
  
  const handleRefresh = () => {
    router.refresh()  // 刷新当前页面
  }
  
  return (
    <div>
      <button onClick={handleBack}>返回</button>
      <button onClick={handleForward}>前进</button>
      <button onClick={handleRefresh}>刷新</button>
    </div>
  )
}
```

---

## 5.4 Link vs useRouter

### 5.4.1 对比

| 特性 | `Link` | `useRouter` |
|------|--------|-------------|
| **使用场景** | 创建链接 | 编程式导航 |
| **组件类型** | 客户端组件 | 客户端组件 |
| **语法** | JSX 组件 | Hook |
| **适用场景** | 导航链接 | 按钮点击、表单提交后导航 |

### 5.4.2 使用建议

**使用 `Link`：**
- ✅ 创建导航链接
- ✅ 用户点击链接跳转
- ✅ 需要 SEO 友好的链接

**使用 `useRouter`：**
- ✅ 按钮点击后导航
- ✅ 表单提交后导航
- ✅ 条件导航（根据逻辑决定跳转）

---

## 5.5 实践：创建导航栏组件

### 完整示例

```typescript
// app/components/Navigation.tsx
'use client'

import Link from 'next/link'
import { usePathname } from 'next/navigation'

export default function Navigation() {
  const pathname = usePathname()
  
  const links = [
    { href: '/', label: '首页' },
    { href: '/about', label: '关于' },
    { href: '/blog', label: '博客' },
    { href: '/contact', label: '联系' }
  ]
  
  return (
    <nav className="bg-gray-800 text-white p-4">
      <div className="container mx-auto flex gap-4">
        {links.map(link => (
          <Link
            key={link.href}
            href={link.href}
            className={`${
              pathname === link.href
                ? 'text-blue-400 font-bold'
                : 'text-gray-300 hover:text-white'
            }`}
          >
            {link.label}
          </Link>
        ))}
      </div>
    </nav>
  )
}
```

**在布局中使用：**

```typescript
// app/layout.tsx
import Navigation from '@/app/components/Navigation'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html>
      <body>
        <Navigation />
        <main>{children}</main>
      </body>
    </html>
  )
}
```

---

## 5.6 导航的最佳实践

### ✅ 推荐做法

1. **使用 `Link` 创建导航链接**：提供更好的用户体验和 SEO
2. **使用 `useRouter` 进行编程式导航**：在需要条件导航时使用
3. **添加活动状态**：使用 `usePathname` 高亮当前页面
4. **预加载链接**：`Link` 组件会自动预加载链接的页面

### ❌ 避免的做法

1. **不要使用 `<a>` 标签**：会触发完整的页面刷新
2. **不要在服务端组件中使用 `useRouter`**：只能在客户端组件中使用

---

## 5.7 总结

### 关键要点

1. **客户端导航**：使用 `next/link` 组件创建导航链接
2. **编程式导航**：使用 `useRouter` Hook 进行编程式导航
3. **只能在客户端使用**：`Link` 和 `useRouter` 都需要在客户端组件中使用
4. **预加载**：`Link` 组件会自动预加载链接的页面，提供更好的性能

### 下一步

完成导航学习后，你已经掌握了 Next.js 路由系统的核心内容。可以进入第三阶段：**组件开发**，学习如何创建和组织组件。

